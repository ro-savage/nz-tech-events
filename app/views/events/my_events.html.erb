<% content_for :title, "My Events - NZ Tech Events" %>

<div class="flex justify-between items-center mb-2">
  <h1>My Events</h1>
  <a href="<%= new_event_path %>" role="button" type="button">Post New Event</a>
</div>

<% if @events.any? %>
  <div class="events-list">
    <% @events.each do |event| %>
      <article class="event-card">
        <div class="event-card-header">
          <span class="<%= event_type_badge_class(event.event_type) %>">
            <%= event.event_type.titleize %>
          </span>
          <div class="flex gap-1 items-center">
            <% if event.start_date < Date.current %>
              <span class="badge badge-other">Past</span>
            <% end %>
            <span class="badge <%= event.free? ? 'badge-free' : 'badge-paid' %>">
              <%= event.cost.presence || "Free" %>
            </span>
          </div>
        </div>

        <h3>
          <a href="<%= event_path(event) %>"><%= event.title %></a>
        </h3>

        <p class="event-meta">
          <%= event.formatted_date %>
          <% if event.formatted_time %>
            &bull; <%= event.formatted_time %>
          <% end %>
          &bull; <%= event.city %>, <%= event.region_display %>
        </p>

        <div class="flex gap-1 mt-2">
          <a href="<%= edit_event_path(event) %>" role="button" type="button" class="outline" style="padding: 0.5rem 1rem; font-size: 0.875rem;">Edit</a>
          <%= button_to "Delete", event_path(event),
              method: :delete,
              data: { turbo_confirm: "Are you sure you want to delete '#{event.title}'?" },
              class: "outline secondary",
              style: "padding: 0.5rem 1rem; font-size: 0.875rem;" %>
        </div>
      </article>
    <% end %>
  </div>
<% else %>
  <div class="empty-state">
    <h3>You haven't posted any events yet</h3>
    <p>Share your tech event with the NZ community!</p>
    <a href="<%= new_event_path %>" role="button" type="button">Post Your First Event</a>
  </div>
<% end %>
